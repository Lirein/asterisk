--- main/cdr.c
+++ main/cdr.c
@@ -2971,23 +2971,23 @@ int ast_cdr_setvar(const char *channel_n
 	}
 
 	for (; (cdr = ao2_iterator_next(it_cdrs)); ao2_unlock(cdr), ao2_cleanup(cdr)) {
+		struct varshead *headp = NULL;
 		ao2_lock(cdr);
 		for (it_cdr = cdr; it_cdr; it_cdr = it_cdr->next) {
-			struct varshead *headp = NULL;
 
 			if (it_cdr->fn_table == &finalized_state_fn_table && it_cdr->next != NULL) {
 				continue;
 			}
 			if (!strcasecmp(channel_name, it_cdr->party_a.snapshot->name)) {
 				headp = &it_cdr->party_a.variables;
-			} else if (it_cdr->party_b.snapshot
-				&& !strcasecmp(channel_name, it_cdr->party_b.snapshot->name)) {
-				headp = &it_cdr->party_b.variables;
-			}
-			if (headp) {
-				set_variable(headp, name, value);
+//			} else if (it_cdr->party_b.snapshot
+//				&& !strcasecmp(channel_name, it_cdr->party_b.snapshot->name)) {
+//				headp = &it_cdr->party_b.variables;
 			}
 		}
+		if (headp) {
+			set_variable(headp, name, value);
+		}
 	}
 	ao2_iterator_destroy(it_cdrs);
 
